# Huawei Interviewing Cheat Sheet

## OS

### 用户态和内核态

- 内核空间，是操作系统内核代码及其运行时数据结构所在的内存区域，拥有对系统所有资源的完全访问权限，如进程管理、内存管理、文件系统、网络堆栈等。
- ⽤户空间，是操作系统为应用程序（如用户运行的进程）分配的内存区域，用户空间中的进程不能直接访问硬件或内核数据结构，只能通过系统调用与内核通信。
- 当用户进程提起系统调用时触发软中断，dive in；硬中断指外部设备或系统事件的中断请求。

### 进程和线程

- **并行**就是多核处理器几个核同时执行，**并发**就是单核处理多任务，任务之间由调度算法分配时间片
- 进程的状态：运行、就绪、阻塞、创建、销毁
- 僵尸进程：已经结束销毁但仍然存在进程表中；孤儿进程：父进程已销毁，会被init进程(pid=1)接管
- 进程调度算法：先来先服务、短作业优先、优先级调度、时间片轮转调度(抢占/非抢占)、最短剩余时间优先(抢占)、多级反馈队列
- 进程通信:消息队列(内核态中的FIFO链表),共享内存,信号量,匿名/命名管道,socket
  - 消息队列是内核态中的FIFO链表
  - 匿名管道只允许父子进程通信,是一个FIFO队列,命名管道无此限制
  - 共享内存:两个进程各自的一块虚拟内存映射到同一个物理内存区域
  - 信号量:P/V操作
- 进程和线程的区别:进程是独立资源单位,线程是独立调度单位… etc.
- 线程的实现方式:
  - 内核态线程:每个用户态线程一对一内核态线程
  - 用户态线程:纯在用户态实现,内核无感知(多对一)
  - 混合实现:每个内核态线程对应数个用户态线程
- 线程间同步:访问共享内存(变量)的方法:锁/信号量
- 死锁产生条件:互斥+持有等待+不可剥夺+循环等待

### 内存管理

- 内存分段:基于物理地址的逻辑分段.段表包括段基地址和界限(最大偏移量)
- 内存分页:连续固定的内存区域 虚拟页和物理页的映射叫页表
- 多级页表
- 缺页中断:从硬盘调入内存,更新页表
- 快表:储存一部分常用页表到cache(这里是TLB)
- 页面置换算法:
  - FIFO
  - OPT(最佳):调出以后不会使用的(不可能)
  - LRU:最近最久未使用
  - 时钟算法:一个循环指针,每当需要置换页面时，指针顺时针移动，检查每个页面的使用位。如果某页面的使用位为0，便将其替换；若为1，则将其重置为0，并继续移动指针。这个过程持续到找到可替换的页面为止。

### 文件

- 硬链接:指向文件的inode;软链接:创建一个文件,内容为目标文件的inode

### IO

- 阻塞拷贝:进行IO时进程阻塞等待;非阻塞拷贝:进程继续执行的同时轮询内核直到数据准备好

## 云计算与微服务

### 容器与安全

- UnionFS：多层文件系统
  - 镜像在下层，是只读的
  - 容器在上层，是可写的；出现修改镜像文件的过程时启用写时复制COW，复制到容器层然后修改，整个过程对用户透明
- Docker Engine的组件
  - 守护进程：dockerd 处理API请求并管理镜像和容器
  - 客户端：提供操作命令行并通过API和守护进程通信
  - 容器运行时：containerd（高级运行时）/runc（低级运行时） 容器的生命周期管理 高级用于传输和管理镜像 低级用于实际运行容器
- Namespace
  - mount：`/proc/<pid>/{mountinfo,mounts,mountstats}`
  - PID：主机上的pid和ns内的pid
  - net：独立的虚拟网络设备以及socket
  - user：用户和组ID的空间，建立 了不同ns之间的用户的映射
- 常见的逃逸情况
  - 权限配置不当：特权容器
  - 恶意挂载：CAP_SYS_ADMIN 
  - 引擎自身漏洞（5736，竟态）
- 权限管理
  - CAPS
  - CGROUPS：资源隔离和资源权限管理

### 微服务

- 微服务的演变
  - 单体式
  - SOA面向服务架构：功能分拆为独立的服务，通过接口和服务总线（BUS）进行通信
  - 微服务：应用程序拆分为小型、自治和松耦合的服务，每个服务专注于最小功能
- 微服务的组件
  - 注册中心：服务的注册和发现
  - 配置中心：管理微服务的配置信息
  - API网关：服务架构的入口，暴露服务并提供路由和负载均衡，缓存，监控日志，API版本管理
- RPC：远程过程调用：像调用函数一样调用远程服务，用于实现分布式系统中不同节点之间的通信。它基于方法调用模型，允许客户端调用远程服务的方法，并等待结果返回。
- 负载均衡：
  - **轮询算法（Round Robin）**：轮询算法是最简单的负载均衡算法之一。它按照顺序将请求依次分配给每个后端服务器，循环往复。当请求到达时，负载均衡器按照事先定义的顺序选择下一个服务器。轮询算法适用于后端服务器具有相同的处理能力和性能的场景。
  - **加权轮询算法（Weighted Round Robin）**：加权轮询算法在轮询算法的基础上增加了权重的概念。每个后端服务器都被赋予一个权重值，权重值越高，被选中的概率就越大。这样可以根据服务器的处理能力和性能调整请求的分配比例，使得性能较高的服务器能够处理更多的请求。
  - **随机算法（Random）**：随机算法将请求随机分配给后端服务器。每个后端服务器有相等的被选中概率，没有考虑服务器的实际负载情况。这种算法简单快速，适用于后端服务器性能相近且无需考虑请求处理能力的场景。
  - **加权随机算法（Weighted Random）**：加权随机算法在随机算法的基础上引入了权重的概念。每个后端服务器被赋予一个权重值，权重值越高，被选中的概率就越大。这样可以根据服务器的处理能力和性能调整请求的分配比例。
  - **最少连接算法（Least Connection）**：最少连接算法会根据后端服务器当前的连接数来决定请求的分配。负载均衡器会选择当前连接数最少的服务器进行请求分配，以保证后端服务器的负载均衡。这种算法适用于后端服务器的处理能力不同或者请求的处理时间不同的场景。
  - **哈希算法（Hash）**：哈希算法会根据请求的某个特定属性（如客户端 IP 地址、请求 URL 等）计算哈希值，然后根据哈希值选择相应的后端服务器。
- 服务雪崩：重试请求在下游不断累积导致请求量增加导致下游继续崩溃
- 服务降级：关闭部分非核心服务，只保留最基本功能
- 服务熔断：超过阈值时后续请求返回默认值或错误信息

## 网络

- **网络体系结构**： 物理、链路、网络（IP）、传输（TCP/UDP）、会话、表示、应用
- 浏览器URL到网页：DNS-TCP-HTTP-服务器-HTTP response-TCP断开
- DNS解析（递归查询，迭代查询不常用）：
  1. 本地缓存检查（浏览器、DNS服务器）
  2. 向递归服务器查询
  3. 递归服务器向根域名服务器请求顶级域名服务器
  4. 顶级域名服务器-权威域名服务器
  5. 拿到IP
- GET：请求；POST：提交写入； PUT：替换
- GET和POST的不同：
  - GET在URL的查询字符后附带参数 POST在body中
  - GET是幂等的操作可以被缓存（没有写入），POST不会
- HTTPS： SSL/TLS非对称加密
  1. 客户端向服务器请求版本和加密算法，服务器返回包含公钥的证书
  2. 客户端生成随机密钥，用公钥加密
  3. 服务器使用私钥解密，获取密钥
  4. 使用对称密钥加解密链接内容
- HTTP是无状态的，用cookies（客户端）、sessions（服务器端）、JWT维持状态
- TCP握手和挥手：
  1. 客户端发送SYN
  1. 服务器发送SYN+ACK
  1. 客户端发送ACK
  1. 客户端发送FIN
  1. 服务器发送ACK
  1. 服务器发送FIN+ACK
  1. 客户端发送FIN+ACK
- 为什么握手不能是两次？如果两次，SYN+ACK丢失，客户端不会开始发送，而服务器端已经在等待数据，造成资源浪费；或者服务器收到很久以前已经失效的SYN，同样会造成资源浪费
- 为什么挥手不能是三次？自己想
- TCP和UDP区别？：面向连接、可靠、拥塞控制、协议复杂度
- IP协议功能：寻址（基于IP地址）、分片、路由、重组
- ARP：网络层的IP地址解析为链路层的MAC地址 在局域网内运作

## 消息队列与redis

- 消息队列的作用：异步处理请求、削峰填谷、并发查询共享资源、解耦合、流量控制、数据缓冲
- 消息队列的模型：发布/订阅、队列。唯一的不同点在于：一份消息数据是否可以被多次消费。
- Redis的作用：基于内存的数据库缓存、分布式锁、也可以用作消息队列（加上celery）

## 大模型



> 体现一下对于业务的方向的熟悉 技术热情 工作意向 语言-测试开发
>
> 关于测试系统？底层？
>
> 网络 网络安全
>
> 计算机相关的
>
> 匹配度 通用技能
